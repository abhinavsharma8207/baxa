<ion-view view-title="BAXA Unification">
<ion-header-bar class="bar-stable">
<a class="button icon-left ion-chevron-left button-clear button-royal" href="#/home"></a>
        <h1 class="title">Secure Income</h1>
</ion-header-bar>
  <ion-content>
    <form class="padding mt50" name="userForm" novalidate>
      <span ng-repeat ="err in errs">
      </span>
          <label class="item item-input" ng-repeat="error in errorMessages">
              <span style="color: red;" class="input-label">{{error}}</span>
         </label>
         <label class="item item-input item-select">
              <span class="input-label">Policy Term *</span>
              <select name="pt" ng-model="data.pt" required ng-options="ptval for ptval in pts" ng-change="populatePPT(data.pt)">
              </select>
            </label>
            <label class="item item-input">
             <span class="input-label">Premium Payment Term *</span>
             <input type="text" ng-model="data.ppt"  name="ppt" ng-disabled="true" required value="0">
            </label>
            <input type="hidden" ng-model="data.prodCode"/>
          <div class="list form-group"  show-errors='{showSuccess: true}'>
            <label class="item item-input">
              <span class="input-label">Life Assurer Name *</span>
              <input type="text" ng-pattern="/^[a-zA-Z0-9]/" only-alphabets ng-trim="false" name="name" ng-model="data.laName" required  />
            </label>
          </div>
            <label class="item item-input">
             <span class="input-label">Life Assurer Age *</span>
             <input type="number" ng-model="data.laAge" name="LaAge" required  ng-blur="validateLAAge(data,'ENTAGE')" value="">
            </label>
            </label>
            <label class="item item-input item-select" ng-model="data.LifeAssurerGender">
             <div class="input-label"> Life Assurer Gender *</div>
             <select name="laGender" required ng-model="data.laGender">
                <option value="0">Male</option>
                <option value="1">Female</option>
             </select>
            </label>
            <label class="item item-input">
             <span class="input-label">Proposer Name *</span>
             <input type="text" name="ProposerName" only-alphabets ng-pattern="/^[a-zA-Z0-9]/"  ng-minlength="1"  ng-maxlength="50" required ng-model="data.proposerName"  value="null">
            </label>
            <label class="item item-input">
             <span class="input-label">Proposer Age *</span>
             <input type="number" required ng-model="data.proposerAge" name="ProposerAge" ng-blur="validatePropAge(data.proposerAge,'PropAge')" ng-min="18" ng-max="99" value="null">
            </label>
            <label class="item item-input item-select">
             <div class="input-label" >Proposer Gender *</div>
             <select  required ng-model="data.proposerGender" name="ProposerGender">
               <option value="0">Male</option>
                <option value="1">Female</option>
             </select>
            </label>
            <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">Self *</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.isSelf"></ion-checkbox>
                 </div>
              </div>
            </label>
             <div class="list form-group"  show-errors='{showSuccess: true}'>
            <label class="item item-input item-select">
             <div class="input-label">Premium Mode</div>
             <select name="premiumMode" required  ng-model="data.premiumMode" ng-change="validatePremium(data)" required>
                <option value="1">Yearly</option>
                <option value="2">Half Yearly</option>
                <option value="4" >Quarterly</option>
                <option value="12">Monthly</option>
             </select>
            </label>
          </div>
          <label class="item item-input">
              <div class="row">
                  <div class="col-75">
                      <div class="input-label">Is sumAssured</div>
                  </div>
                  <div class="col-25">
                      <ion-checkbox ng-model="data.isSA" ng-disabled="data.isBP" ></ion-checkbox>
                  </div>
              </div>
          </label>
            <label class="item item-input">
             <span class="input-label">Sum Assured *</span>
             <input type="number" ng-disabled="data.isBP" ng-model="data.sumAssured" required ng-blur="populateBasePremium(data.sumAssured,data.ppt,data.laAge)" ng-maxlength="10" name="SumAssured"  value="0">
          </label>
            <input type="hidden" ></div>
            <label class="item item-input">
                <div class="row">
                    <div class="col-75">
                        <div class="input-label">Is Base Premium</div>
                    </div>
                    <div class="col-25">
                        <ion-checkbox ng-model="data.isBP" ng-disabled="data.isSA" ></ion-checkbox>
                    </div>
                </div>
            </label>
            <label class="item item-input">
             <span class="input-label">Base Premium *</span>
             <input type="number" ng-disabled="data.isSA" name="BasePremium" required ng-model="data.basePremium"  ng-blur="populateSumAssured(data.basePremium,data.ppt,data.laAge)"  ng-maxlength="10" value="0">
            </label>
            <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">NSAP For LA</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.NSAPForLA"></ion-checkbox>
                 </div>
              </div>
            </label>
            <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">ADB Rider</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.ADBRider" ng-click="copyTerm()"></ion-checkbox>
                 </div>
              </div>
            </label>
            <label class="item item-input item-select" ng-show="data.ADBRider">
             <div class="input-label">ADB Sum Assured</div>
             <input type="text" ng-model="data.sumAssuredForADBRiders"  name="ppt"   value="0">
            </label>
            <label class="item item-input item-select" ng-show="data.ADBRider">
             <div class="input-label">Rider Term</div>
             <input type="text" ng-model="data.riderterm"  name="riderterm"   >
            </label>
             <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">HospiCash</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.hospiCash"></ion-checkbox>
                 </div>
              </div>
            </label>
            <label class="item item-input item-select" ng-show="data.hospiCash">
             <div class="input-label">DHCB</div>
             <select name="sumAssuredForRiders" ng-model="data.sumAssuredForRiders">
                <option value="1000" >1000</option>
                <option value="2000">2000</option>
                <option value="3000" >3000</option>
             </select>
            </label>
            <label class="item item-input item-select" ng-show="data.hospiCash">
             <div class="input-label">Rider Term</div>
             <select name="riderPpt" ng-model="data.riderPpt">
                <option value="5" >5</option>
                <option value="7">7</option>
                <option value="10">10</option>
                <option value="15" >15</option>
               <option value="20" >20</option>
             </select>
            </label>
             <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">PWR I</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.PWRI"></ion-checkbox>
                 </div>
              </div>
            </label>
             <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                 <div class="input-label">PWR II</div>
                 </div>
                 <div class="col-25">
                  <ion-checkbox ng-model="data.PWRII"></ion-checkbox>
                 </div>
              </div>
            </label>
                 <label class="item item-input">
              <div class="row">
                 <div class="col-75">
                    <ul>
                      <li style="color:red;" ng-repeat="error in errors">{{error}}</li>
                    </ul>
                 </div>
              </div>
            </label>
            <button class="button button-full button-assertive mt25" ng-click="dbValidation(data)"
              >Calculate</button>
          </div>
        </form>
 <div class="padding">
          <div class="mt35" ng-show="showOutput">
                <span><b>Calculated Output</b></span>
          <div class="item row" >
                <div class="col-80"><p class="test">Base Premium</p></div>
                <div class="col-20"><span ng-bind="answer.base"></span></div>
              </div>
               <div class="item row" >
                <div class="col-80"><p class="test">Modal Premium</p></div>
                <div class="col-20"><span ng-bind="answer.baseModal"></span></div>
              </div>
              <div class="item row" >
                <div class="col-80"><p class="test">Nsap base Premium</p></div>
                <div class="col-20"><span ng-bind="answer.extraPremiumDueToNSAP"></span></div>
                </div>
              <div class="item row">
                <div class="col-80"><p class="test">Nsap Modal Premium </p></div>
                <div class="col-20"><span ng-bind="answer.extraModalPremiumDueToNSAP"></span></div>
                 </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>Total Modal Premium</div>
                <div class="col-20"><span ng-bind="answer.totalModalPremium"></span></div>
                 </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>Service Tax for First Year</div>
                <div class="col-20"><span ng-bind="answer.serviceTaxForFirstYear"></span></div>
                 </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>Service Tax For Second Year</div>
                <div class="col-20"><span ng-bind="answer.serviceTaxForSecondYear"></span></div>
                 </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>Total Premium for First Year</div>
                <div class="col-20"><span ng-bind="answer.totalModalPremiumWithServiceTaxForFirstYear"></span></div>
                 </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>Total Premium For Second Year</div>
                <div class="col-20"><span ng-bind="answer.totalModalPremiumWithServiceTaxForSecondYear"></span></div>
              </div>
              <div class="item row" >
                <div class="col-80"><p class="test"></p>GuaranteedMonthlyIncome</div>
                <div class="col-20"><span ng-bind="answer.GuaranteedMonthlyIncome"></span></div>
              </div>
          </div>
          </div>
          <div ng-show="showvalid" >
        </div>
          <div class="mt35" ng-show="biOutput" style="overflow: auto;">
          <span><b>Calculated Output For BI</b></span>
            <TABLE BORDER="2"   WIDTH="75%"   CELLPADDING="4" CELLSPACING="3">
              <tr>
               <th colspan="8"><br><h3 align="center">BI Calculation</h3></th>
              </tr>
              <tr>
               <th>End of policy year</th>
               <th>Premium paid</th>
               <th colspan="6">Living benefits</th>
              </tr>
              <tr>
               <th></th>
               <th></th>
               <th colspan="5">Guaranteed</th>
              </tr>
              <tr>
               <th></th>
               <th></th>
               <th>Death Benefit</th>
               <th>Sum Assured</th>
               <th>Guaranteed Additions</th>
               <th>Survival Benefit</th>
               <th>Surrender Value</th>
               <th>Special Surrender value</th>
              </tr>
              <tr align="center"  ng-repeat="pemiValues in BIData.endOfPolicyYear">
              <TD>{{BIData.endOfPolicyYear[$index]}}</TD>
               <TD>{{BIData.premiumPaid[$index]}}</TD>
               <TD>{{BIData.deathBenifit[$index]}}</TD>
               <TD>{{BIData.gSumAssured[$index]}}</TD>
               <TD>{{BIData.gSumAdditions[$index]}}</TD>
               <TD>{{gVals.gsb[$index]}}</TD>
               <TD>{{gVals.gsv[$index]}}</TD>
               <TD>{{gVals.gSpclSV[$index]}}</TD>
              </tr>
            </TABLE>
            </div>
          <div class="mt30 border"></div>
          <div class="mt35">
             <span><b>User Input</b></span>
          <div class="item row" ng-repeat="(key,value) in  adbInput">
                <div class="col-80"><p class="test">{{key}}</p></div>
                <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
                <div class="mt35">
                </div>
          <div class="mt35" ng-show="adbPremiumOutput">
          <span><b>Calculated Output</b></span>
          <div class="item row" ng-repeat="(key,value) in  adbData">
                <div class="col-80"><p class="test">{{key}}</p></div>
                <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
                  <div class="mt35 border"></div>
          <div class="mt35">
          <span><b>User Input</b></span>
          <div class="item row" ng-repeat="(key,value) in  hospicashInput">
                <div class="col-80"><p class="test">{{key}}</p></div>
                <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
        <div class="mt35" ng-show="hospicashOutput">
          <span><b>Calculated Output</b></span>
          <div class="item row" ng-repeat="(key,value) in  hospiCashData">
                <div class="col-80"><p class="test">{{key}}</p></div>
                <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
                  <div class="mt35 border"></div>
          <div class="mt35 border"></div>
          <div class="mt35" ng-show="pwrOutputOption1">
          <span><b>Calculated Output</b></span>
          <div class="item row" ng-repeat="(key,value) in  pwrData1">
              <div class="col-80"><p class="test">{{key}}</p></div>
              <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
          <div class="mt35 border"></div>
      <div class="mt35" ng-show="pwrOutputOption2">
          <span><b>Calculated Output</b></span>
          <div class="item row" ng-repeat="(key,value) in  pwrData2">
              <div class="col-80"><p class="test">{{key}}</p></div>
              <div class="col-20"><span>{{value}}</span></div>
          </div>
          </div>
</ion-content>
</ion-view>
